// {{path.summary}} - {{path.description}}
{{#if path.deprecated}}
// DEPRECATED
{{/if}}
it('{{path.method}} {{apiDocs.basePath}}{{path.path}}', function() {
    {{#each (get_path_params path.path)}}
    const {{@key}} = {{.}};
    {{/each}}
    {{#if (has_param_type path.parameters "body")}}
    const data =
    {{print_schema (find_body_schema path.parameters)}};
    {{/if}}
    return client.restRequest({
        method: '{{path.method}}',
        path: `{{apiDocs.basePath}}{{replace_path_params path.path}}`,
        {{#if (has_param_type path.parameters "query")}}
        params: {
            {{#each path.parameters}}
            {{#if (eq in "query")}}
            {{name}}: {{param_value .}}{{#unless @last}},{{/unless}} // description = {{description}}, required = {{required}}, type = {{type}}, default = {{default}}, enum = {{enum}}
            {{/if}}
            {{/each}}
        }{{#if (has_param_type path.parameters "body")}},{{/if}}
        {{/if}}
        {{#if (has_param_type path.parameters "body")}}
        data
        {{/if}}
    }).then(response => {
        {{#with (find_success_response path.responses)}}
        // {{description}}
        assert.strictEqual(response.status, {{statusCode}});
        {{#if schema}}
        {{>assert schema data_path="response.data" message="data"}}
        {{/if}}
        {{/with}}
    }){{#if (eq path.method 'POST')}}.finally(() => client.restRequest({method: 'DELETE', path: `{{apiDocs.basePath}}{{replace_path_params path.path}}`})){{/if}};
});
